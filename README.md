# **🔐 암호화의 두 축: 대칭키 vs 비대칭키**

암호화 시스템은 크게 두 가지 방식으로 나뉜다.

- **대칭키 암호화**: 하나의 비밀키로 암호화와 복호화를 모두 수행. 대표적으로 AES. 빠르고 계산량이 적어 대용량 데이터 암호화에 적합.
- **비대칭키 암호화**: 공개키와 비공개키라는 두 개의 키를 사용. 대표적으로 RSA가 있으며, 한 키로 암호화한 데이터는 반드시 다른 키로만 복호화 가능. 키 교환, 인증, 서명 등에 사용

**⚡ 성능 측면에서의 차이**

| **항목** | **대칭키 (AES)** | **비대칭키 (RSA)** |
| --- | --- | --- |
| 속도 | 매우 빠름 | 상대적으로 느림 |
| 연산량 | 적음 | 많음 (큰 수 연산) |
| 자원 사용 | 낮음 | 높음 |
| 사용 용도 | 메시지/파일 암호화 | 키 전달/서명/인증 |

이러한 성능 차이로 인해 실제 보안 시스템에서는 “하이브리드 암호화”라는 방식이 등장!

# **🔄 하이브리드 암호화란?**

> 빠르고 효율적인 AES로 메시지를 암호화하고, 이 AES 키를 수신자의 공개키(RSA)로 암호화하는 방식
> 

**💬 전송 흐름:**

1.	클라이언트는 랜덤 AES 키를 생성

2.	메시지를 AES 키로 암호화 (IV 포함)

3.	AES 키를 상대방의 공개키로 RSA 암호화

4.	암호문 + 암호화된 AES 키를 서버에 저장 또는 전송

수신자는:

1.	자신의 비공개키로 AES 키를 복호화

2.	해당 AES 키로 메시지를 복호화

이 구조를 통해 속도와 보안을 동시에 확보

**🔑 IV란?**

- **IV (Initialization Vector)**: AES 블록 암호화에서 첫 블록을 랜덤화하기 위해 사용되는 16바이트 값. 암호문에 포함되며 공개되어도 보안에 문제가 없음.

**📦 실제 구현 시 암호문 구조**

```
{
  "encryptedMessage": "<IV + AES 암호문>",
  "encryptedAesKey": "<RSA로 암호화된 AES 키>"
}
```

**🧠 왜 클라이언트에서 암복호화를 할까?**

- 서버에서 암복호화를 하면 서버가 평문을 보게 되므로 진정한 보안이 어려움
- 클라이언트에서 키를 생성하고, 암호화를 수행하며 서버는 단순한 전달자 역할만 수행하면 진정한 **종단간 암호화 (E2EE)** 구조가 완성.

**📌 클라이언트 중심 E2EE 흐름 정리**

1. 클라이언트가 공개키를 서버에 등록
2. 메시지를 보내기 전 상대방의 공개키를 서버에서 조회
3. AES 키 생성 → 메시지를 암호화 → AES 키는 상대의 공개키로 암호화
4. 수신자는 자신의 비공개키로 AES 키 복호화 → 메시지 복호화

**✅ 결론**

- 대칭키는 빠르지만 키 전달이 문제
- 비대칭키는 느리지만 키 전달에 강력함
- 그래서 하이브리드 암호화를 통해 둘의 장점을 조합
- 클라이언트가 암복호화를 주도하면 진정한 종단간 보안(E2EE)이 가능함
